<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tick-Majority Trading</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Plotly.js for chart visualization -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>Tick-Majority Trading</h1>
            <p>Random price generator starting at 10,000 with ±0.1 fluctuations</p>
        </header>

        <div class="main-content">
            <!-- Chart Container -->
            <div class="chart-container">
                <div id="priceChart"></div>
            </div>

            <!-- Current Price Info -->
            <div class="price-info">
                <div class="price-display">
                    <span id="currentPrice">10000.0</span>
                    <span id="priceDirection" class="neutral">→</span>
                </div>
                <div class="tick-history">
                    <span>Recent: </span><span id="tickHistory">-</span>
                </div>
            </div>

            <!-- Trading Form -->
            <div class="trading-panel">
                <h2>Place a Trade</h2>
                
                <div class="form-group">
                    <label for="duration">Duration:</label>
                    <div class="slider-container">
                        <input type="range" id="duration" min="5" max="15" value="7" class="slider">
                        <span id="durationValue">7 ticks</span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="minUpticks">Minimum Up-ticks:</label>
                    <div class="slider-container">
                        <input type="range" id="minUpticks" min="1" max="7" value="3" class="slider">
                        <span id="minUpticksValue">3 ticks</span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="stake">Stake ($):</label>
                    <input type="number" id="stake" min="1" step="1" value="10" class="input-field">
                </div>
                
                <div class="form-group">
                    <label for="houseEdge">House Edge:</label>
                    <input type="number" id="houseEdge" min="0.01" step="0.01" value="0.05" class="input-field">
                </div>
                
                <button id="placeTradeBtn" class="btn primary-btn" disabled>Place Trade</button>
            </div>

            <!-- Trade Calculations -->
            <div class="trade-calculations">
                <h2>Trade Details</h2>
                
                <div class="calculation-item">
                    <span class="label">Fair Price:</span>
                    <span id="fairPrice" class="value">-</span>
                </div>
                
                <div class="calculation-item">
                    <span class="label">House Edge:</span>
                    <span id="appliedHouseEdge" class="value">-</span>
                </div>
                
                <div class="calculation-item">
                    <span class="label">Total Price per Contract:</span>
                    <span id="totalPrice" class="value">-</span>
                </div>
                
                <div class="calculation-item">
                    <span class="label">Contracts Purchased:</span>
                    <span id="contracts" class="value">-</span>
                </div>
                
                <div class="calculation-item highlight">
                    <span class="label">Potential Payout:</span>
                    <span id="potentialPayout" class="value">-</span>
                </div>
                
                <div class="summary-box">
                    <p id="tradeSummary">-</p>
                </div>
            </div>

            <!-- Active Contract Display -->
            <div id="activeContract" class="active-contract hidden">
                <h2>Active Contract</h2>
                <div class="contract-progress">
                    <div class="progress-item">
                        <span class="label">Progress:</span>
                        <span id="contractProgress" class="value">0/0</span>
                    </div>
                    <div class="progress-item">
                        <span class="label">Up-ticks:</span>
                        <span id="upTickCount" class="value">0</span>
                    </div>
                    <div class="progress-item">
                        <span class="label">Target:</span>
                        <span id="upTickTarget" class="value">0</span>
                    </div>
                </div>
                <div class="contract-info">
                    <p><strong>Note:</strong> Up-ticks are counted when a tick's price is higher than the <em>previous</em> tick's price.</p>
                </div>
                <div class="progress-bar-container">
                    <div id="progressBar" class="progress-bar"></div>
                </div>
            </div>
        </div>

        <!-- Contract Result Notification -->
        <div id="resultNotification" class="notification hidden">
            <div class="notification-content">
                <h3 id="resultTitle">Contract Result</h3>
                <p id="resultMessage"></p>
                <button id="closeNotification" class="btn">Close</button>
            </div>
        </div>

        <footer>
            <p>Tick-Majority Trading Simulator - Random Price Generator</p>
        </footer>
    </div>

    <script src="app.js"></script>
</body>
</html>
